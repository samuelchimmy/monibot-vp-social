# monibot-vp-social
# MoniBot-VP-Social ü§ñ - Monipay's VP of Growth (The Social Agent)

This is the social layer and the "voice" of MoniPay's on-chain transaction engine (MoniBot). This service **autonomously manages MoniPay's Twitter (X) presence** by:

*   Generating responses to successful and unsuccessful transactions.
*   Posting marketing campaign announcements.

**Core Objective:** Build and maintain a vibrant onchain community presence using humor and Base ecosystem knowledge.

## üîó Key Features

*   **Zero-Cost Twitter Write Access:** Utilizes the official Twitter API v2 with OAuth 2.0 for reliable, non-ban-prone posting.
*   **Autonomous Persona:** Powered by **Google Gemini AI**, the bot has a defined "VP of Growth" persona, including humorous replies and campaign generation.
*   **Database Integration:** Seamlessly integrates with the `monibot_transactions` table created by the MoniBot Worker bot, ensuring up-to-date transaction awareness.
*   **Scheduled Campaigns:** Posts campaign announcements at optimal times to drive user engagement.
*   **Robust Error Handling:** Correctly handles success, allowance, and blockchain errors to create helpful, tailored replies.

## üìÇ Project Structure
monibot-vp-social/
‚îú‚îÄ‚îÄ package.json # Project dependencies and scripts
‚îú‚îÄ‚îÄ index.js # Main loop (starts all components)
‚îú‚îÄ‚îÄ gemini.js # Generates replies using Google Gemini
‚îú‚îÄ‚îÄ twitter-oauth2.js # Handles Twitter OAuth 2.0 authentication and posting
‚îú‚îÄ‚îÄ database.js # Supabase integration (read)
‚îî‚îÄ‚îÄ campaigns.js # Campaign scheduling and content generation
code
Code
## üöÄ How It Works

1.  **The "Worker" Does the Work:** The core MoniBot worker bot (repository: [MoniBot Repo](https://github.com/samuelchimmy/monibot)) processes on-chain transactions. It then logs the results to the `monibot_transactions` table in your Supabase database.
2.  **The Social Agent Reads the Logs:** This "VP of Growth" bot continuously polls the `monibot_transactions` table for new entries where `replied = false`.
3.  **Gemini Generates the Hype:** For each new transaction, Gemini crafts a personalized, humorous tweet.
4.  **Post to Twitter:** The bot posts the tweet to Twitter using OAuth 2.0.
5.  **The Completion:** The `replied` flag in the database is set to `true`, preventing duplicate posts.
6.  **Campaigning:** The `campaigns.js` scheduler (using `node-cron`) will post automated campaign tweets.

---

## üõ†Ô∏è Setup and Deployment

This bot runs as a Node.js service on Railway.

### Prerequisites
1.  **A Twitter Developer Account:** You must have a Twitter Developer account and an app created in the Twitter Developer Portal.
2.  **OAuth 2.0 App:** Ensure that your Twitter Developer App has the "Read and Write" permissions enabled.
3.  **Client Credentials:** You must have the following:
    *   Your Twitter App's **Client ID** (from OAuth 2.0).
    *   Your Twitter App's **Client Secret** (from OAuth 2.0).
    *   The **Twitter-generated Refresh Token** (generated by a one-time script that uses those credentials).
4.  **A Supabase Project:** You will need the URL and the Service Key for your Supabase project.
5.  **A Google Gemini API Key:** You will need to provide access to the Gemini service.

### Step-by-Step Deployment on Railway
1.  **Fork this Repository:** Fork this GitHub repository (`samuelchimmy/monibot-vp-social`) to your account.
2.  **Create a New Railway Project:**
    *   In Railway, click **"+ New Project"**.
    *   Select **"Deploy from GitHub repo"** and choose your forked `monibot-vp-social` repository.
3.  **Configure Environment Variables:** In your Railway Project, under the **Variables** tab, add the following:

    | Variable Name | Value |
    | :--- | :--- |
    | `GEMINI_API_KEY` | *(Your Gemini API Key)* |
    | `SUPABASE_URL` | *(Your Supabase Project URL)* |
    | `SUPABASE_SERVICE_KEY` | *(Your Supabase Service Key)* |
    | `TWITTER_CLIENT_ID` | *(Your Twitter App Client ID)* |
    | `TWITTER_CLIENT_SECRET` | *(Your Twitter App Client Secret)* |
    | `TWITTER_OAUTH2_REFRESH_TOKEN` | *(Your Twitter App Refresh Token)* |
    | `X_USERNAME` | *(Your Twitter Bot Username)* |
    | `X_PASSWORD` | *(Your Twitter Bot Password)* |
    | `X_EMAIL` | *(Your Twitter Bot Email)* |

4.  **Deployment:** Railway will automatically build and deploy the service. Check the logs to ensure there are no errors.
5.  **Verify Connection:** The logs should show "‚úÖ Twitter OAuth 2.0 initialized and token refreshed."

### Initial Testing:
1.  Ensure the `monibot_transactions` table exists in your Supabase project.
2.  Trigger a P2P command using your Worker Bot.
3.  Check the logs of the Social Agent to confirm that it found the unreplied transaction and posted the tweet.
